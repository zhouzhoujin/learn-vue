<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>todolist</title>
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
        crossorigin="anonymous">
    <style>
        .red {
            background: #ff0000;
        }

        .add-form {
            margin: 20px 0;
        }

    </style>
</head>
<body>

    <div id="app" class="text-center">
        <h1>todolist</h1>
        <hr>
        <form class="form-inline" @submit.prevent>
            <div class="form-group">
                <input type="text" class="form-control" placeholder="请输入商品名称" >
                <button>搜索</button>
            </div>
        </form>
        <form class="form-inline add-form" @submit.prevent>
            <div class="form-group">
                <label for="product-name">商品名称</label>
                <input v type="text" class="form-control" id="product-name" placeholder="请输入商品名称"v-model="productName">
            </div>
            <div class="form-group">
                <label for="product-price">商品价格</label>
                <input  type="number" class="form-control" id="product-price" placeholder="商品价格" v-model="productPrice">
            </div>
            <button  type="submit" class="btn btn-default glyphicon glyphicon-plus" @click="add">增加</button>
        </form>
        <table class="table table-bordered">
            <thead>
            <tr class="warning">
                <td>选择</td>
                <td>商品名称</td>
                <td>商品价格</td>
                <td>删除</td>
            </tr>

            </thead>
            <tbody>
            <tr v-for="(product,index) in productList" @click="select(product)" :class="{red: product.isRed}">
                <td>
                    <input  type="checkbox" @click.stop v-model="checkedList" :value="index">
                </td>
                <td>{{product.name}}</td>
                <td>{{product.price}}</td>
                <td>
                    <button  type="button" class="btn btn-warning glyphicon glyphicon-remove btn-xs" @click="del(index)"></button>
                </td>
            </tr>

            <tr>
                <td>
                    <button type="button" class="btn btn-danger btn-xs" @click="delSelect">删除选中</button>
                </td>
                <td colspan="3">
                    总价是：{{total}} 元
                </td>
            </tr>
            </tbody>
        </table>
    </div>
    <script src="vue.js"></script>
    <script>
        new  Vue({
            el:'#app',
            data:{
                productName:'',
                productPrice:'',
                checkedList:[],
                productList:[
                    {
                        name:'衣服',
                        price:123,
                        isRed:false
                    },
                    {
                        name:'裤子',
                        price:223,
                        isRed:false
                    },
                    {
                        name:'帽子',
                        price:103,
                        isRed:false
                    },
                    {
                        name:'手机',
                        price:8888,
                        isRed:false
                    }
                ]
            },
            methods:{
                select(product){
                    product.isRed=!product.isRed;
                },
                del(index){
                    this.productList.splice(index,1)
                },
                add(){
                    this.productList.push({
                        name:this.productName,
                        price:this.productPrice,
                        isRed:false
                    })
                    this.productName='';
                    this.productPrice='';
                },
                delSelect(){
                    this.productList=this.productList.filter((elem,index)=>{
                        if (!this.checkedList.includes(index)){
                            return elem;
                        }
                    })
                    this.checkedList=[];
                }
            },
            computed:{
                total(){
                    return this.productList.reduce((sum,elem)=>{
                        if(elem.isRed){
                            sum += parseInt(elem.price);
                            console.log(sum)
                        }
                        return sum;
                    },0)
                }
            }
        })

    </script>

</body>



